{"ast":null,"code":"import * as io from 'socket.io-client';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../../components/usernname/usernname.component\";\n\nfunction ChatComponent_app_usernname_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-usernname\", 10);\n    i0.ɵɵlistener(\"userNameEvent\", function ChatComponent_app_usernname_3_Template_app_usernname_userNameEvent_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.userNameUpdate($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ChatComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵelementStart(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const user_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r5);\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    mine: a0\n  };\n};\n\nfunction ChatComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵelementStart(1, \"div\", 13);\n    i0.ɵɵelementStart(2, \"div\", 14);\n    i0.ɵɵelementStart(3, \"p\", 15);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵelementStart(6, \"p\", 16);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const msg_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(3, _c0, msg_r6.mine));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(msg_r6.userName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(msg_r6.message);\n  }\n}\n\nexport let ChatComponent = /*#__PURE__*/(() => {\n  class ChatComponent {\n    constructor() {\n      this.userName = '';\n      this.message = '';\n      this.messageList = [];\n      this.userList = [];\n    }\n\n    userNameUpdate(name) {\n      this.socket = io.io(`localhost:3000?userName=${name}`);\n      this.userName = name;\n      this.socket.emit('set-user-name', name);\n      this.socket.on('user-list', userList => {\n        this.userList = userList;\n      });\n      this.socket.on('message-broadcast', data => {\n        if (data) {\n          this.messageList.push({\n            message: data.message,\n            userName: data.userName,\n            mine: false\n          });\n        }\n      });\n    }\n\n    sendMessage() {\n      this.socket.emit('message', this.message);\n      this.messageList.push({\n        message: this.message,\n        userName: this.userName,\n        mine: true\n      });\n      this.message = '';\n    }\n\n  }\n\n  ChatComponent.ɵfac = function ChatComponent_Factory(t) {\n    return new (t || ChatComponent)();\n  };\n\n  ChatComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ChatComponent,\n    selectors: [[\"app-chat\"]],\n    decls: 15,\n    vars: 4,\n    consts: [[1, \"container\"], [3, \"userNameEvent\", 4, \"ngIf\"], [1, \"chatbox\"], [1, \"chatbox__user-list\"], [\"class\", \"chatbox__user--active\", 4, \"ngFor\", \"ngForOf\"], [1, \"messages_list\"], [\"class\", \"chatbox__messages\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"send-message\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"], [3, \"userNameEvent\"], [1, \"chatbox__user--active\"], [1, \"chatbox__messages\", 3, \"ngClass\"], [1, \"user-message\"], [1, \"message-box\"], [1, \"name\"], [1, \"message\"]],\n    template: function ChatComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"h1\");\n        i0.ɵɵtext(2, \"Competent programming - Chat App\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, ChatComponent_app_usernname_3_Template, 1, 0, \"app-usernname\", 1);\n        i0.ɵɵelementStart(4, \"div\", 2);\n        i0.ɵɵelementStart(5, \"div\", 3);\n        i0.ɵɵelementStart(6, \"h2\");\n        i0.ɵɵtext(7, \"User list\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(8, ChatComponent_div_8_Template, 3, 1, \"div\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 5);\n        i0.ɵɵtemplate(10, ChatComponent_div_10_Template, 8, 5, \"div\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 7);\n        i0.ɵɵelementStart(12, \"input\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function ChatComponent_Template_input_ngModelChange_12_listener($event) {\n          return ctx.message = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function ChatComponent_Template_button_click_13_listener() {\n          return ctx.sendMessage();\n        });\n        i0.ɵɵtext(14, \"Send\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", !ctx.userName);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.userList);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.messageList);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.message);\n      }\n    },\n    directives: [i1.NgIf, i1.NgForOf, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i3.UsernnameComponent, i1.NgClass],\n    styles: [\".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100vh;width:100vw}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5em auto;color:#fff;text-align:center}.chatbox[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.05);width:80%;height:75%;border-radius:.2em;position:relative;box-shadow:1px 1px 12px rgba(0,0,0,.1)}.chatbox[_ngcontent-%COMP%]   .messages_list[_ngcontent-%COMP%]{overflow-y:auto;height:100%}.chatbox__messages.mine[_ngcontent-%COMP%]   .message-box[_ngcontent-%COMP%]{float:right}.chatbox__messages[_ngcontent-%COMP%]   .message-box[_ngcontent-%COMP%]{float:left}.chatbox[_ngcontent-%COMP%]   .message-box[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.2);padding:1em 0;height:auto;width:55%;border-radius:5px;margin:2em 1em;overflow:auto}.chatbox[_ngcontent-%COMP%]   .message-box[_ngcontent-%COMP%] > p.name[_ngcontent-%COMP%]{color:#fff;font-size:1em}.chatbox[_ngcontent-%COMP%]   .message-box[_ngcontent-%COMP%] > p.message[_ngcontent-%COMP%]{color:#fff;font-size:.7em;margin:0 2.8em}.chatbox__user-list[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.1);width:25%;height:100%;float:right;border-top-right-radius:.2em;border-bottom-right-radius:.2em}.chatbox__user-list[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.05);color:hsla(0,0%,100%,.9);font-size:.9em;padding:1em;margin:0;font-weight:300;text-align:center}.chatbox__user[_ngcontent-%COMP%], .chatbox__user--active[_ngcontent-%COMP%]{width:.5em;height:.5em;border-radius:100%;margin:1em .7em}.chatbox__user--active[_ngcontent-%COMP%]{background:rgba(23,190,187,.8)}.chatbox[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{float:left;text-align:left;margin:-.25em 2em;font-size:.7em;font-weight:300;color:#fff;width:200px}.chatbox[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{background:#222}.chatbox[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.03);position:absolute;bottom:0;left:0;border:none;width:75%;padding:1.2em;outline:none;color:hsla(0,0%,100%,.9);font-weight:300}\"]\n  });\n  return ChatComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}